FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGFlcm9nZWFyLWRpZ2dlci1hcGIKZGVzY3JpcHRpb246IE1vYmls\
ZSBDSXxDRCBzZXJ2aWNlIHRoYXQgaW50ZWdyYXRlcyB3aXRoIEplbmtpbnMgUGlwZWxpbmVzIHRv\
IHRlc3QgYW5kIGJ1aWxkIHlvdXIgbW9iaWxlIGJpbmFyaWVzLgpiaW5kYWJsZTogRmFsc2UKYXN5\
bmM6IG9wdGlvbmFsCnRhZ3M6CiAgLSBtb2JpbGUtc2VydmljZQogIC0gbW9iaWxlLWNsaWVudC1l\
bmFibGVkCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBNb2JpbGUgQ0l8Q0QKICBsb25nRGVzY3Jp\
cHRpb246ICJUbyB1c2UgdGhlIE1vYmlsZSBDSXxDRCBzZXJ2aWNlIHlvdSBtdXN0IGZpcnN0IGFn\
cmVlIHRvIHRoZSBBbmRyb2lkIFNESyBMaWNlbnNlIEFncmVlbWVudC4gQnkgY2hlY2tpbmcgdGhp\
cyBib3ggeW91IGFyZSBhZ3JlZWluZyB0byB0aGUgQW5kcm9pZCBTb2Z0d2FyZSBEZXZlbG9wbWVu\
dCBLaXQgTGljZW5zZSBhZ3JlZW1lbnQgd2hpY2ggY2FuIGJlIHJlYWQgYXQgdGhlIGZvbGxvd2lu\
ZyBVUkw6IGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3N0dWRpby90ZXJtcy5odG1sXG5c\
bi4gSWYgdGhlIGJveCBpcyBub3QgY2hlY2tlZCB0aGUgaW5zdGFsbGVyIHdpbGwgdGFrZSBubyBh\
Y3Rpb24uIgogIHNlcnZpY2VOYW1lOiBhZXJvZ2Vhci1kaWdnZXIKICBpbWFnZVVybDogImh0dHBz\
Oi8vYWVyb2dlYXIub3JnL2ltZy9hZXJvZ2VhcmRpZ2dlcl9pY29uXzMycHhfY3JvcHBlZC5wbmci\
CiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBzOi8vYWVyb2dlYXIub3JnL2RpZ2dlci8iCiAgcHJv\
dmlkZXJEaXNwbGF5TmFtZTogIlJlZCBIYXQsIEluYy4iCnBsYW5zOgogIC0gbmFtZTogZGVmYXVs\
dAogICAgZGVzY3JpcHRpb246IERlZmF1bHQgcGxhbgogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRh\
dGE6IHt9CiAgICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBBTkRST0lEX0xJQ0VOU0VfQUdSRUVN\
RU5UCiAgICAgIGRlZmF1bHQ6ICIiCiAgICAgIHBhdHRlcm46IF55ZXMkCiAgICAgIHR5cGU6IHN0\
cmluZwogICAgICBkZXNjcmlwdGlvbjogIlR5cGUgJ3llcycgYWJvdmUgdG8gYWNjZXB0IHRoZSBB\
bmRyb2lkIFNESyBMaWNlbnNlIEFncmVlbWVudC4gaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5j\
b20vc3R1ZGlvL3Rlcm1zLmh0bWwiCiAgICAgIHRpdGxlOiBBbmRyb2lkIFNESyBMaWNlbnNlIEFn\
cmVlbWVudAogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICBkaXNwbGF5X2dyb3VwOiBBbmRyb2lk\
IFNESwogICAgLSBuYW1lOiBBTkRST0lEX1NES19DT05GSUcKICAgICAgZGVmYXVsdDogfAogICAg\
ICAgIFtiYXNlXQogICAgICAgIHRvb2xzCiAgICAgICAgcGxhdGZvcm0tdG9vbHMKIAogICAgICAg\
IFtwbGF0Zm9ybXNdCiAgICAgICAgYW5kcm9pZC0yNgogICAgICAgIGFuZHJvaWQtMjUKICAgICAg\
ICAgCiAgICAgICAgW2J1aWxkLXRvb2xzXQogICAgICAgIDI2LjAuMgogICAgICAgIDI2LjAuMQog\
ICAgICAgIDI2LjAuMAogICAgICAgIDI1LjAuMwogICAgICAgIDI1LjAuMgogICAgICAgICAKICAg\
ICAgICBbZXh0cmFzOmdvb2dsZV0KICAgICAgICBnb29nbGVfcGxheV9zZXJ2aWNlcwogICAgICAg\
IG0ycmVwb3NpdG9yeQogICAgICAgICAKICAgICAgICBbZXh0cmFzOmFuZHJvaWRdCiAgICAgICAg\
bTJyZXBvc2l0b3J5CiAgICAgICAgIAogICAgICAgIFtleHRyYXM6bTJyZXBvc2l0b3J5OmNvbTph\
bmRyb2lkOnN1cHBvcnQ6Y29uc3RyYWludDpjb25zdHJhaW50LWxheW91dF0KICAgICAgICAxLjAu\
MAogICAgICAgIDEuMC4xCiAgICAgICAgMS4wLjIKICAgICAgICAgCiAgICAgICAgW2V4dHJhczpt\
MnJlcG9zaXRvcnk6Y29tOmFuZHJvaWQ6c3VwcG9ydDpjb25zdHJhaW50OmNvbnN0cmFpbnQtbGF5\
b3V0LXNvbHZlcl0KICAgICAgICAxLjAuMAogICAgICAgIDEuMC4yCiAgICAgICAgIAogICAgICAg\
IFtrZXlzdG9yZV0KICAgICAgICBhbGlhcz1BbmRyb2lkRGVidWdLZXkKICAgICAgICBuYW1lPUFH\
CiAgICAgICAgdW5pdD1BZXJvR2VhcgogICAgICAgIG9yZz1SZWRIYXQKICAgICAgICBsb2M9V2F0\
ZXJmb3JkCiAgICAgICAgc3RhdGU9V0QKICAgICAgICBjb3VudHJ5PUlSTAogICAgICAgIHN0b3Jl\
cGFzcz1hbmRyb2lkCiAgICAgICAga2V5cGFzcz1hbmRyb2lkCiAgICAgIHR5cGU6IHN0cmluZwog\
ICAgICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAgICAgIGRlc2NyaXB0aW9uOiAiQW5kcm9pZCBT\
REsgY29uZmlnIGNvbnRlbnQiCiAgICAgIHRpdGxlOiBBbmRyb2lkIFNESyBwYWNrYWdlIGNvbmZp\
ZwogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgdXBkYXRhYmxlOiBUcnVlCiAgICAgIGRpc3Bs\
YXlfZ3JvdXA6IEFuZHJvaWQgU0RLCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
